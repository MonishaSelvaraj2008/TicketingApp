<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Story List</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

</head>
<body>

  

<div class="m-2 max-w-screen-md">
    <div class="rounded-xl border border-gray-200 bg-white p-6 shadow-lg ">
      <input type="text" placeholder="Search by Responsible, Description and Status" [(ngModel)]="searchTerm" class="p-2 border rounded-md"><br><br>
        <div *ngIf="values.length > 0; else noUserStories">
            <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
                <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
                    <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-center" matTooltip="Ticket Id">
                              ID 
                            </th>
                            <th scope="col" class="px-6 py-3 text-center" matTooltip="Responsible Name">
                                Responsible
                            </th>
                            <th scope="col" class="px-6 py-3 text-center" matTooltip="Description">
                                Description
                            </th>
                            <th scope="col" class="px-6 py-3 text-center" matTooltip="Status">
                                Status
                            </th>
                            <th scope="col" class="px-6 py-3 text-center" matTooltip="Added On">
                              Added On
                          </th>
                            <th scope="col" class="px-6 py-3 text-center actions" matTooltip="Actions">
                                Actions
                            </th>
                        </tr>
                    </thead>
                    <tbody *ngFor="let data of filteredValues.slice(currentPageStartIndex(), currentPageEndIndex()); let i = index">
                        <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                            <td class="px-6 py-4 text-center" matTooltip="{{'US00' + data.id}}">
                                {{'US00' + data.id}}
                            </td>
                            <td class="px-6 py-4 text-center" matTooltip="{{data.responsibleName}}">
                                {{data.responsibleName}}
                            </td>
                            <td class="px-6 py-4 text-center" matTooltip="{{data.description}}">
                                {{data.description}}
                            </td>
                            <td class="px-6 py-4 text-center" matTooltip="{{data.status}}">
                                <span *ngIf="data.status === 'Open' " class="px-2 py-1 font-semibold leading-tight text-green-700 bg-green-100 rounded-sm">{{data.status}}</span>
                                <span *ngIf="data.status === 'In Progress' " class="px-2 py-1 font-semibold leading-tight text-blue-700 bg-blue-100 rounded-sm">{{data.status}}</span>
                                <span *ngIf="data.status === 'On Hold' " class="px-2 py-1 font-semibold leading-tight text-yellow-700 bg-yellow-100 rounded-sm">{{data.status}}</span>
                                <span *ngIf="data.status === 'Resolved' " class="px-2 py-1 font-semibold leading-tight text-green-700 bg-green-100 rounded-sm">{{data.status}}</span>
                                <span *ngIf="data.status === 'Closed' " class="px-2 py-1 font-semibold leading-tight text-red-700 bg-red-100 rounded-sm">{{data.status}}</span>
                                <span *ngIf="data.status === 'Pending' " class="px-2 py-1 font-semibold leading-tight text-gray-700 bg-gray-100 rounded-sm">{{data.status}}</span>
                            </td>
                            <td class="px-6 py-4 text-center" matTooltip="{{data.addedOn | date}}">
                              {{data.addedOn | date}}
                          </td>
                            <td class="px-6 py-4 text-center" >
                                <div class=" actions flex items-center space-x-6 mt-1 ">
                                    
                                  <a [routerLink]="['/description', data.id]" class="flex items-center text-blue-600 dark:text-blue-500 hover:underline" matTooltip="Description">
                                    <mat-icon class="mat-18">description</mat-icon>
                                  </a>
                                  <a [routerLink]="['/updateUserStory', data.id]" class="flex items-center text-green-600 dark:text-green-500 hover:underline" matTooltip="Update">
                                    <mat-icon class="mat-18">edit</mat-icon>
                                  </a>
                                  <a [routerLink]="['/viewUserStoryHistory', data.id]" class="flex items-center text-purple-600 dark:text-purple-500 hover:underline" matTooltip="History">
                                    <mat-icon class="mat-18">history</mat-icon>
                                  </a>
                              </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            
                <!-- pagination -->
                <nav class="flex items-center flex-column flex-wrap md:flex-row justify-between pt-4" aria-label="Table navigation">
                    <span class="text-sm font-normal text-gray-500 dark:text-gray-400 mb-4 md:mb-0 block w-full md:inline md:w-auto">
                        Showing <span class="font-semibold text-gray-900 dark:text-white">&nbsp;{{ currentPageStartIndex() }}&nbsp;-&nbsp;{{ currentPageEndIndex() }}</span> &nbsp; of &nbsp; <span class="font-semibold text-gray-900 dark:text-white">{{ values.length }}</span>
                    </span>
                    <ul class="inline-flex -space-x-px rtl:space-x-reverse text-sm h-8">
                        <li>
                            <a routerLink="userStoryList" (click)="goToPage(currentPage - 1)"  class="flex items-center justify-center px-3 h-8 ms-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-s-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">Previous</a>
                        </li>
                        <li *ngFor="let page of getPages()">
                            <a routerLink="userStoryList" (click)="goToPage(page)" [class.active]="currentPage === page" class="flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-blue border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">{{ page }}</a>
                        </li>
                        <li>
                            <a routerLink="userStoryList" (click)="goToPage(currentPage + 1)" class="flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 rounded-e-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">Next</a>
                        </li>
                    </ul>
                </nav><br>
            </div>    
        </div>
    </div>
  </div>

<ng-template #noUserStories>
    <p class="no-user-stories">No user stories found.</p>
  </ng-template>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</body>
</html>